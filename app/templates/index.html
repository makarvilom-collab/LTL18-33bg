{% extends "base.html" %}

{% block content %}
<div class="hero">
    <h1 class="hero-title">BEATSSUDA Community</h1>
    <p class="hero-subtitle">–ú–µ—Å—Ç–æ –¥–ª—è –ø—Ä–æ–¥–∞–∂–∏ –∏ –ø–æ–∫—É–ø–∫–∏ –±–∏—Ç–æ–≤, —É—Å–ª—É–≥ —Å–≤–µ–¥–µ–Ω–∏—è, –º–∞—Å—Ç–µ—Ä–∏–Ω–≥–∞ –∏ –≤—Å–µ–≥–æ, —á—Ç–æ —Å–≤—è–∑–∞–Ω–æ —Å –ø—Ä–æ–¥–∞–∫—à–µ–Ω–æ–º</p>
</div>

{% if not request.endpoint or request.endpoint == 'index' %}
<div class="welcome-section">
    <div class="welcome-card">
        <h2 class="welcome-title">üî• –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ LTL18:33bg!</h2>
        <p class="welcome-text">
            –ó–¥–µ—Å—å –≤—ã –º–æ–∂–µ—Ç–µ <strong>–ø–æ–∫—É–ø–∞—Ç—å –∏ –ø—Ä–æ–¥–∞–≤–∞—Ç—å</strong> –∫–∞—á–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–µ–Ω–∞:
        </p>
        <div class="features-grid">
            <div class="feature-item">
                <div class="feature-icon">üéµ</div>
                <div class="feature-content">
                    <h3>–ë–∏—Ç—ã –∏ –õ—É–ø—ã</h3>
                    <p>Trap, Drill, R&B –∏ –¥—Ä—É–≥–∏–µ –∂–∞–Ω—Ä—ã –æ—Ç —Ç–∞–ª–∞–Ω—Ç–ª–∏–≤—ã—Ö –ø—Ä–æ–¥—é—Å–µ—Ä–æ–≤</p>
                </div>
            </div>
            <div class="feature-item">
                <div class="feature-icon">üõ†</div>
                <div class="feature-content">
                    <h3>–£—Å–ª—É–≥–∏</h3>
                    <p>–ü—Ä–æ—Ñ–µ—Å—Å–∏–æ–Ω–∞–ª—å–Ω–æ–µ —Å–≤–µ–¥–µ–Ω–∏–µ –∏ –º–∞—Å—Ç–µ—Ä–∏–Ω–≥ –≤–∞—à–∏—Ö —Ç—Ä–µ–∫–æ–≤</p>
                </div>
            </div>
            <div class="feature-item">
                <div class="feature-icon">ü•Å</div>
                <div class="feature-content">
                    <h3>–î—Ä–∞–º-–∫–∏—Ç—ã</h3>
                    <p>–≠–∫—Å–∫–ª—é–∑–∏–≤–Ω—ã–µ –±–∞—Ä–∞–±–∞–Ω–Ω—ã–µ –Ω–∞–±–æ—Ä—ã –∏ –ø–µ—Ä–∫—É—Å—Å–∏—è</p>
                </div>
            </div>
            <div class="feature-item">
                <div class="feature-icon">üéõ</div>
                <div class="feature-content">
                    <h3>–ü—Ä–µ—Å–µ—Ç—ã</h3>
                    <p>–ì–æ—Ç–æ–≤—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è —Å–∏–Ω—Ç–µ–∑–∞—Ç–æ—Ä–æ–≤ –∏ –ø–ª–∞–≥–∏–Ω–æ–≤</p>
                </div>
            </div>
        </div>
        <div class="welcome-actions">
            <a href="{{ url_for('create_listing') }}" class="btn btn-primary">üî• –°–æ–∑–¥–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ</a>
            <a href="{{ url_for('search') }}" class="btn btn-secondary">üîç –ù–∞–π—Ç–∏ —á—Ç–æ –Ω—É–∂–Ω–æ</a>
        </div>
        <p class="welcome-note">
            <em>–°—Ç–∏–ª—å BEATSSUDA: –º–∏–Ω–∏–º–∞–ª, —á–∏—Å—Ç–æ, –ø–æ —Å—É—Ç–∏</em>
        </p>
    </div>
</div>
{% endif %}

<div class="listings-grid" id="listings-container">
    {% for listing in listings %}
    <div class="listing-card" data-type="{{ listing.listing_type }}" data-genre="{{ listing.genre }}" data-price="{{ listing.price_usd }}">
        <div class="listing-header">
            <span class="listing-type {{ listing.listing_type }}">
                {% if listing.listing_type == 'sell' %}üî• –ü–†–û–î–ê–ú{% elif listing.listing_type == 'buy' %}üíé –ö–£–ü–õ–Æ{% else %}üõ† –£–°–õ–£–ì–ê{% endif %}
            </span>
            <span class="listing-id">#{{ listing.id }}</span>
        </div>
        
        <h3 class="listing-title">{{ listing.item_type }} - {{ listing.genre }}</h3>
        
        <div class="listing-details">
            <div class="detail-row">
                <span class="detail-label">üßë –ê–≤—Ç–æ—Ä:</span>
                <span class="detail-value">{{ listing.author }}</span>
            </div>
            
            {% if listing.preview_url %}
            <div class="detail-row">
                <span class="detail-label">üîó –ü—Ä–µ–≤—å—é:</span>
                <a href="{{ listing.preview_url }}" target="_blank" class="preview-link">–°–ª—É—à–∞—Ç—å</a>
            </div>
            {% endif %}
            
            <div class="detail-row">
                <span class="detail-label">üí∏ –¶–µ–Ω–∞:</span>
                <span class="detail-value price">{{ listing.price }}</span>
            </div>
            
            {% if listing.license %}
            <div class="detail-row">
                <span class="detail-label">üìå –õ–∏—Ü–µ–Ω–∑–∏—è:</span>
                <span class="detail-value">{{ listing.license }}</span>
            </div>
            {% endif %}
            
            {% if listing.includes %}
            <div class="detail-row">
                <span class="detail-label">üì¶ –í–∫–ª—é—á–µ–Ω–æ:</span>
                <span class="detail-value">{{ listing.includes }}</span>
            </div>
            {% endif %}
            
            {% if listing.delivery_time %}
            <div class="detail-row">
                <span class="detail-label">‚è± –°—Ä–æ–∫:</span>
                <span class="detail-value">{{ listing.delivery_time }}</span>
            </div>
            {% endif %}
        </div>
        
        {% if listing.description %}
        <div class="listing-description">
            <p>{{ listing.description }}</p>
        </div>
        {% endif %}
        
        <div class="listing-footer">
            <a href="{{ listing.contact }}" class="contact-btn" target="_blank">
                üì© {{ listing.contact }}
            </a>
            <div class="listing-tags">
                {% for tag in listing.tags %}
                <span class="tag">{{ tag }}</span>
                {% endfor %}
            </div>
        </div>
        
        <div class="listing-meta">
            <small>–°–æ–∑–¥–∞–Ω–æ: {{ listing.created_at.strftime('%d.%m.%Y –≤ %H:%M') }}</small>
        </div>
    </div>
    {% endfor %}
</div>

{% if not listings %}
<div class="empty-state">
    <h3>–ü–æ–∫–∞ –æ–±—ä—è–≤–ª–µ–Ω–∏–π –Ω–µ—Ç</h3>
    <p>–°—Ç–∞–Ω—å—Ç–µ –ø–µ—Ä–≤—ã–º, –∫—Ç–æ —Ä–∞–∑–º–µ—Å—Ç–∏—Ç –æ–±—ä—è–≤–ª–µ–Ω–∏–µ –≤ –Ω–∞—à–µ–º –∫–æ–º—å—é–Ω–∏—Ç–∏!</p>
    <a href="{{ url_for('create_listing') }}" class="btn btn-primary">–°–æ–∑–¥–∞—Ç—å –æ–±—ä—è–≤–ª–µ–Ω–∏–µ</a>
</div>
{% endif %}
{% endblock %}