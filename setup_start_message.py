#!/usr/bin/env python3
"""
–ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–º–∞–Ω–¥ –∏ –æ–ø–∏—Å–∞–Ω–∏–π –±–æ—Ç–∞
"""
import requests
import json

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
BOT_TOKEN = "8405053839:AAENp9xuJw2HVwF1FWs8Dipwkrur1dqK2Uw"
PLATFORM_URL = "https://ltl-18-33bg.vercel.app"

def set_start_command_description():
    """–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –æ–ø–∏—Å–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã /start"""
    url = f"https://api.telegram.org/bot{BOT_TOKEN}/setMyCommands"
    
    commands = [
        {
            "command": "start",
            "description": "üéµ –î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ BEATSSUDA Platform"
        },
        {
            "command": "app", 
            "description": "üì± –û—Ç–∫—Ä—ã—Ç—å –ø–ª–∞—Ç—Ñ–æ—Ä–º—É –¥–ª—è –ø–æ–∫—É–ø–∫–∏/–ø—Ä–æ–¥–∞–∂–∏ –±–∏—Ç–æ–≤"
        },
        {
            "command": "help",
            "description": "‚ùì –ü–æ–º–æ—â—å –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã"
        }
    ]
    
    response = requests.post(url, json={"commands": commands})
    
    if response.status_code == 200:
        result = response.json()
        if result["ok"]:
            print("‚úÖ –ö–æ–º–∞–Ω–¥—ã –±–æ—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω—ã")
            return True
        else:
            print(f"‚ùå –û—à–∏–±–∫–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥: {result}")
            return False
    else:
        print(f"‚ùå HTTP –æ—à–∏–±–∫–∞: {response.status_code}")
        return False

def setup_webhook_for_start_message():
    """–ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –≤–µ–±—Ö—É–∫ –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Å–æ–æ–±—â–µ–Ω–∏–π"""
    # –î–ª—è –ø—Ä–æ—Å—Ç–æ–≥–æ –±–æ—Ç–∞ –±—É–¥–µ–º –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å polling —á–µ—Ä–µ–∑ getUpdates
    # –∏–ª–∏ –Ω–∞—Å—Ç—Ä–æ–∏–º –≤–µ–±—Ö—É–∫ –Ω–∞ –Ω–∞—à —Å–∞–π—Ç
    webhook_url = f"{PLATFORM_URL}/webhook/{BOT_TOKEN}"
    
    url = f"https://api.telegram.org/bot{BOT_TOKEN}/setWebhook"
    
    response = requests.post(url, json={"url": webhook_url})
    
    if response.status_code == 200:
        result = response.json()
        if result["ok"]:
            print(f"‚úÖ –í–µ–±—Ö—É–∫ –Ω–∞—Å—Ç—Ä–æ–µ–Ω: {webhook_url}")
            return True
        else:
            print(f"‚ö†Ô∏è –í–µ–±—Ö—É–∫ –Ω–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω: {result}")
            return False
    else:
        print(f"‚ùå HTTP –æ—à–∏–±–∫–∞ –ø—Ä–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –≤–µ–±—Ö—É–∫–∞: {response.status_code}")
        return False

def send_start_message_example():
    """–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∏–º–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏—è –¥–ª—è /start"""
    message = """üéµ *–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –≤ LTL18:33BG \- BEATSSUDA Platform*

–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ–º\\! –ú—ã \- –∫–æ–º—å—é–Ω–∏—Ç–∏ –±–∏—Ç–º–µ–π–∫–µ—Ä–æ–≤ –∏ –ø—Ä–æ–¥—é—Å–µ—Ä–æ–≤\\.
–ü–æ–º–æ–≥–∞–µ–º –¥—Ä—É–≥ –¥—Ä—É–≥—É, –¥–µ–ª–∞–µ–º –∑–≤—É–∫,
–ø—Ä–æ–¥–∞—ë–º / –ø–æ–∫—É–ø–∞–µ–º / –¥–µ–ª–∏–º—Å—è –∫–∏—Ç–∞–º–∏ –∏ –ø—Ä–µ—Å–µ—Ç–∞–º–∏\\.

üî• *–ó–¥–µ—Å—å –≤—ã –º–æ–∂–µ—Ç–µ:*
‚Ä¢ –ü–æ–∫—É–ø–∞—Ç—å –∏ –ø—Ä–æ–¥–∞–≤–∞—Ç—å –±–∏—Ç—ã
‚Ä¢ –ó–∞–∫–∞–∑—ã–≤–∞—Ç—å –º–∞—Å—Ç–µ—Ä–∏–Ω–≥ –∏ —Å–≤–µ–¥–µ–Ω–∏–µ  
‚Ä¢ –î–µ–ª–∏—Ç—å—Å—è –æ–ø—ã—Ç–æ–º —Å –∫–æ–º—å—é–Ω–∏—Ç–∏
‚Ä¢ –ù–∞—Ö–æ–¥–∏—Ç—å –Ω—É–∂–Ω—ã–µ –∫–∏—Ç—ã –∏ –ø—Ä–µ—Å–µ—Ç—ã

–ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É –Ω–∏–∂–µ —á—Ç–æ–±—ã –æ—Ç–∫—Ä—ã—Ç—å –ø–ª–∞—Ç—Ñ–æ—Ä–º—É:"""
    
    print("üìù –†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Ç–µ–∫—Å—Ç –¥–ª—è –∫–æ–º–∞–Ω–¥—ã /start:")
    print("=" * 50)
    print(message)
    print("=" * 50)
    return message

def main():
    print("ü§ñ –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–æ–º–∞–Ω–¥ –±–æ—Ç–∞ –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–∏—è")
    print("=" * 60)
    
    # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–∏–º–µ—Ä —Å–æ–æ–±—â–µ–Ω–∏—è
    send_start_message_example()
    
    print("\n1Ô∏è‚É£ –û–±–Ω–æ–≤–ª—è–µ–º –æ–ø–∏—Å–∞–Ω–∏—è –∫–æ–º–∞–Ω–¥...")
    if set_start_command_description():
        print("‚úÖ –ö–æ–º–∞–Ω–¥—ã –æ–±–Ω–æ–≤–ª–µ–Ω—ã")
    
    print("\n2Ô∏è‚É£ –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º –≤–µ–±—Ö—É–∫ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)...")
    setup_webhook_for_start_message()
    
    print("\nüéØ –°–õ–ï–î–£–Æ–©–ò–ô –®–ê–ì:")
    print("–î–ª—è –ø–æ–ª–Ω–æ–π —Ä–∞–±–æ—Ç—ã –∫–æ–º–∞–Ω–¥—ã /start –Ω—É–∂–Ω–æ:")
    print("1. –î–æ–±–∞–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ /webhook –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ")
    print("2. –ò–ª–∏ –Ω–∞—Å—Ç—Ä–æ–∏—Ç—å –ø—Ä–æ—Å—Ç–æ–π polling –±–æ—Ç")
    print("3. –î–æ–±–∞–≤–∏—Ç—å –æ—Ç–ø—Ä–∞–≤–∫—É –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–≥–æ —Å–æ–æ–±—â–µ–Ω–∏—è")
    
    print(f"\nüîó –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä—É–π –±–æ—Ç–∞: https://t.me/ltl1833bg_bot")
    print("üí° –ü–æ–∫–∞ —á—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–Ω–æ–ø–∫–∞ –º–µ–Ω—é, –¥–∞–ª–µ–µ –¥–æ–±–∞–≤–∏–º –æ–±—Ä–∞–±–æ—Ç–∫—É /start")

if __name__ == "__main__":
    main()